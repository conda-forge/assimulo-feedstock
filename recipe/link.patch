diff --git a/setup.py b/setup.py
index db510cb..7441ae6 100644
--- a/setup.py
+++ b/setup.py
@@ -361,7 +361,9 @@ class Assimulo_prepare(object):
                     
             #if self.with_BLAS:
             #    self.superLUFiles.append(self.BLASname)
-            
+            if "win" in self.platform:
+                self.superLUFiles.append("blas.lib")
+
             L.debug("SuperLU files: "+str(self.superLUFiles))
             
         else:
@@ -520,6 +522,8 @@ class Assimulo_prepare(object):
                 ext_list[-1].include_dirs.append(self.SLUincdir)
                 ext_list[-1].library_dirs.append(self.SLUlibdir)
                 ext_list[-1].libraries.extend(self.superLUFiles)
+                if 'win' in self.platform:
+                    ext_list[-1].extra_compile_args += ["/D__OPENMP"]
 
         ## Radau5
         ext_list += cythonize([os.path.join("assimulo","thirdparty","radau5","radau5ode.pyx")],
@@ -538,11 +542,11 @@ class Assimulo_prepare(object):
         if self.with_SLU:
             if 'win' in self.platform:
                 ext_list[-1].library_dirs = [os.path.join(self.SLUincdir, "..", "lib"), self.libdirs]
-                ext_list[-1].libraries = ['superlu_mt_OPENMP', 'blas_OPENMP']
-                ext_list[-1].extra_compile_args += ["-D__OPENMP", "-D__RADAU5_WITH_SUPERLU"]
+                ext_list[-1].libraries = ['superlu_mt_OPENMP', 'blas']
+                ext_list[-1].extra_compile_args += ["/D__OPENMP", "/D__RADAU5_WITH_SUPERLU"]
             else:
                 ext_list[-1].library_dirs = [os.path.join(self.SLUincdir, "..", "lib"), self.BLASdir]
-                ext_list[-1].libraries = ['superlu_mt_OPENMP', 'blas_OPENMP', 'blas', 'm', 'gomp']
+                ext_list[-1].libraries = ['superlu_mt_OPENMP', 'blas', 'm', 'gomp']
                 ext_list[-1].extra_compile_args = ["-D__RADAU5_WITH_SUPERLU"]
         else:
             if 'win' not in self.platform:
